{"version":3,"file":"commonHelpers.js","sources":["../src/js/main-section-api.js","../src/img/symbol-defs.svg","../src/js/main-section-layout.js","../src/img/main-section/no-results.svg","../src/js/header.js"],"sourcesContent":["const API_KEY = 'sDWkN6pm2AwhXYN4z6b2LV2Cv7281iLQ';\nconst PER_PAGE = 20;\n\nlet page = 1;\nlet searchText = '';\nlet countryCode = '';\n\nexport function setSearch(query, country) {\n  searchText = query;\n  countryCode = country;\n  page = 1;\n}\n\nexport function incrementPage() {\n  page += 1;\n}\n\nexport async function getEvents() {\n  try {\n    const today = new Date().toISOString();\n\n    const params = new URLSearchParams({\n      apikey: API_KEY,\n      page: page - 1,\n      size: PER_PAGE,\n      sort_by: 'eventdate',\n      order: 'asc',\n      eventdate_from: today,\n    });\n\n    if (searchText) params.append('keyword', searchText);\n    if (countryCode) params.append('countryCode', countryCode);\n\n    const response = await fetch(\n      `https://app.ticketmaster.com/discovery/v2/events.json?${params}`\n    );\n\n    const data = await response.json();\n    return data._embedded?.events || [];\n  } catch (error) {\n    console.log(error);\n    return [];\n  }\n}\n","export default \"__VITE_ASSET__d90e9707__\"","import spritePath from '../img/symbol-defs.svg';\n\nconst eventsList = document.querySelector('.events-list');\n\nexport function clearEvents() {\n  eventsList.innerHTML = '';\n}\n\nfunction getBestImage(images = []) {\n  if (!images.length) return '';\n\n  const sorted = images.sort((a, b) => b.width - a.width);\n\n  return sorted[0].url;\n}\n\nexport function drawEvents(data = []) {\n  const markup = data\n    .map(event => {\n      const venue = event._embedded?.venues?.[0];\n\n      const venueName = venue?.name || 'Unknown venue';\n      const city = venue?.city?.name || '';\n      const country = venue?.country?.name || '';\n      const fullPlace = [venueName, city, country].filter(Boolean).join(', ');\n\n      const imageUrl = getBestImage(event.images);\n\n      return `\n      <li class=\"list-item\">\n        <img src=\"${imageUrl}\" alt=\"${event.name}\" loading=\"lazy\">\n        <h3>${event.name}</h3>\n        <p>${event.dates.start.localDate}</p>\n        <p>\n          <svg class=\"icon-location\">\n            <use href=\"${spritePath}#location\"></use>\n          </svg>\n          ${fullPlace}\n        </p>\n      </li>`;\n    })\n    .join('');\n\n  eventsList.insertAdjacentHTML('beforeend', markup);\n}\n","export default \"__VITE_ASSET__a0f520ce__\"","import { setSearch, getEvents } from './main-section-api';\nimport { drawEvents, clearEvents } from './main-section-layout';\nimport noResultsImg from '../img/main-section/no-results.svg';\n\nconst heroSearchForm = document.querySelector('.hero-search');\nconst searchInput = document.querySelector('.search-input input');\nconst countrySelect = document.querySelector('.search-select select');\nconst eventsList = document.querySelector('.events-list');\n\nfunction fetchEventCards(searchText = '', countryCode = '') {\n  setSearch(searchText, countryCode);\n  clearEvents();\n\n  getEvents()\n    .then(events => {\n      if (!events.length) {\n        const noResultsDiv = document.createElement('div');\n        noResultsDiv.classList.add('no-results');\n        noResultsDiv.innerHTML = `\n          <img src=\"${noResultsImg}\" alt=\"No results found\" />\n          <p>Нічого не знайдено</p>\n        `;\n        eventsList.appendChild(noResultsDiv);\n        return;\n      }\n      drawEvents(events);\n    })\n    .catch(error => {\n      console.log('Помилка при отриманні events:', error);\n    });\n}\n\nfetchEventCards();\n\nheroSearchForm.addEventListener('submit', e => {\n  e.preventDefault();\n\n  const searchText = searchInput.value.trim();\n  const countryCode = countrySelect.value;\n\n  if (!searchText && !countryCode) return;\n\n  fetchEventCards(searchText, countryCode);\n});\n\ncountrySelect.addEventListener('change', () => {\n  const searchText = searchInput.value.trim();\n  const countryCode = countrySelect.value;\n\n  if (!searchText && !countryCode) return;\n\n  fetchEventCards(searchText, countryCode);\n});\n"],"names":["API_KEY","PER_PAGE","page","searchText","countryCode","setSearch","query","country","getEvents","today","params","_a","error","spritePath","eventsList","clearEvents","getBestImage","images","a","b","drawEvents","data","markup","event","venue","_b","venueName","city","_c","_d","fullPlace","noResultsImg","heroSearchForm","searchInput","countrySelect","fetchEventCards","events","noResultsDiv","e"],"mappings":"ssBAAA,MAAMA,EAAU,mCACVC,EAAW,GAEjB,IAAIC,EAAO,EACPC,EAAa,GACbC,EAAc,GAEX,SAASC,EAAUC,EAAOC,EAAS,CACxCJ,EAAaG,EACbF,EAAcG,EACdL,EAAO,CACT,CAMO,eAAeM,GAAY,OAChC,GAAI,CACF,MAAMC,EAAQ,IAAI,KAAM,EAAC,YAAW,EAE9BC,EAAS,IAAI,gBAAgB,CACjC,OAAQV,EACR,KAAME,EAAO,EACb,KAAMD,EACN,QAAS,YACT,MAAO,MACP,eAAgBQ,CACtB,CAAK,EAED,OAAIN,GAAYO,EAAO,OAAO,UAAWP,CAAU,EAC/CC,GAAaM,EAAO,OAAO,cAAeN,CAAW,IAOlDO,GADM,MAJI,MAAM,MACrB,yDAAyDD,CAAM,EACrE,GAEgC,QAChB,YAAL,YAAAC,EAAgB,SAAU,EAClC,OAAQC,EAAO,CACd,eAAQ,IAAIA,CAAK,EACV,EACR,CACH,CC3CA,MAAeC,EAAA,iDCETC,EAAa,SAAS,cAAc,cAAc,EAEjD,SAASC,GAAc,CAC5BD,EAAW,UAAY,EACzB,CAEA,SAASE,EAAaC,EAAS,GAAI,CACjC,OAAKA,EAAO,OAEGA,EAAO,KAAK,CAACC,EAAGC,IAAMA,EAAE,MAAQD,EAAE,KAAK,EAExC,CAAC,EAAE,IAJU,EAK7B,CAEO,SAASE,EAAWC,EAAO,GAAI,CACpC,MAAMC,EAASD,EACZ,IAAIE,GAAS,aACZ,MAAMC,GAAQC,GAAAd,EAAAY,EAAM,YAAN,YAAAZ,EAAiB,SAAjB,YAAAc,EAA0B,GAElCC,GAAYF,GAAA,YAAAA,EAAO,OAAQ,gBAC3BG,IAAOC,EAAAJ,GAAA,YAAAA,EAAO,OAAP,YAAAI,EAAa,OAAQ,GAC5BrB,IAAUsB,EAAAL,GAAA,YAAAA,EAAO,UAAP,YAAAK,EAAgB,OAAQ,GAClCC,EAAY,CAACJ,EAAWC,EAAMpB,CAAO,EAAE,OAAO,OAAO,EAAE,KAAK,IAAI,EAItE,MAAO;AAAA;AAAA,oBAFUS,EAAaO,EAAM,MAAM,CAIpB,UAAUA,EAAM,IAAI;AAAA,cAClCA,EAAM,IAAI;AAAA,aACXA,EAAM,MAAM,MAAM,SAAS;AAAA;AAAA;AAAA,yBAGfV,CAAU;AAAA;AAAA,YAEvBiB,CAAS;AAAA;AAAA,YAGrB,CAAK,EACA,KAAK,EAAE,EAEVhB,EAAW,mBAAmB,YAAaQ,CAAM,CACnD,CC5CA,MAAeS,EAAA,gDCITC,EAAiB,SAAS,cAAc,cAAc,EACtDC,EAAc,SAAS,cAAc,qBAAqB,EAC1DC,EAAgB,SAAS,cAAc,uBAAuB,EAC9DpB,EAAa,SAAS,cAAc,cAAc,EAExD,SAASqB,EAAgBhC,EAAa,GAAIC,EAAc,GAAI,CAC1DC,EAAUF,EAAYC,CAAW,EACjCW,IAEAP,EAAW,EACR,KAAK4B,GAAU,CACd,GAAI,CAACA,EAAO,OAAQ,CAClB,MAAMC,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAU,IAAI,YAAY,EACvCA,EAAa,UAAY;AAAA,sBACXN,CAAY;AAAA;AAAA,UAG1BjB,EAAW,YAAYuB,CAAY,EACnC,MACD,CACDjB,EAAWgB,CAAM,CACvB,CAAK,EACA,MAAMxB,GAAS,CACd,QAAQ,IAAI,gCAAiCA,CAAK,CACxD,CAAK,CACL,CAEAuB,IAEAH,EAAe,iBAAiB,SAAUM,GAAK,CAC7CA,EAAE,eAAc,EAEhB,MAAMnC,EAAa8B,EAAY,MAAM,KAAI,EACnC7B,EAAc8B,EAAc,MAE9B,CAAC/B,GAAc,CAACC,GAEpB+B,EAAgBhC,EAAYC,CAAW,CACzC,CAAC,EAED8B,EAAc,iBAAiB,SAAU,IAAM,CAC7C,MAAM/B,EAAa8B,EAAY,MAAM,KAAI,EACnC7B,EAAc8B,EAAc,MAE9B,CAAC/B,GAAc,CAACC,GAEpB+B,EAAgBhC,EAAYC,CAAW,CACzC,CAAC"}