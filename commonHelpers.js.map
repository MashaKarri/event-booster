{"version":3,"file":"commonHelpers.js","sources":["../src/js/main-section-api.js","../src/js/main-section-layout.js","../src/js/header.js"],"sourcesContent":["const API_KEY = 'sDWkN6pm2AwhXYN4z6b2LV2Cv7281iLQ';\nconst PER_PAGE = 20;\n\nlet page = 1;\nlet searchText = '';\nlet countryCode = '';\n\nexport function setSearch(query, country) {\n  searchText = query;\n  countryCode = country;\n  page = 1;\n}\n\nexport function incrementPage() {\n  page += 1;\n}\n\nexport async function getEvents() {\n  try {\n    const today = new Date().toISOString();\n\n    const params = new URLSearchParams({\n      apikey: API_KEY,\n      page: page - 1,\n      size: PER_PAGE,\n      sort_by: 'eventdate',\n      order: 'asc',\n      eventdate_from: today,\n    });\n\n    if (searchText) params.append('keyword', searchText);\n    if (countryCode) params.append('countryCode', countryCode);\n\n    const response = await fetch(\n      `https://app.ticketmaster.com/discovery/v2/events.json?${params}`\n    );\n\n    const data = await response.json();\n    return data._embedded?.events || [];\n  } catch (error) {\n    console.log(error);\n    return [];\n  }\n}\n","const eventsList = document.querySelector('.events-list');\n\nexport function clearEvents() {\n  eventsList.innerHTML = '';\n}\n\nfunction getBestImage(images = []) {\n  if (!images.length) return '';\n\n  const sorted = images.sort((a, b) => b.width - a.width);\n\n  return sorted[0].url;\n}\n\nexport function drawEvents(data = []) {\n  const markup = data\n    .map(event => {\n      const venue = event._embedded?.venues?.[0];\n\n      const venueName = venue?.name || 'Unknown venue';\n      const city = venue?.city?.name || '';\n      const country = venue?.country?.name || '';\n      const fullPlace = [venueName, city, country].filter(Boolean).join(', ');\n\n      const imageUrl = getBestImage(event.images);\n\n      return `\n      <li class=\"list-item\">\n        <img src=\"${imageUrl}\" alt=\"${event.name}\" loading=\"lazy\">\n        <h3>${event.name}</h3>\n        <p>${event.dates.start.localDate}</p>\n        <p>\n          <svg class=\"icon-location\">\n            <use href=\"./img/symbol-defs.svg#location\"></use>\n          </svg>\n          ${fullPlace}\n        </p>\n      </li>`;\n    })\n    .join('');\n\n  eventsList.insertAdjacentHTML('beforeend', markup);\n}\n","import { setSearch, getEvents } from './main-section-api';\nimport { drawEvents, clearEvents } from './main-section-layout';\n\nconst heroSearchForm = document.querySelector('.hero-search');\nconst searchInput = document.querySelector('.search-input input');\nconst countrySelect = document.querySelector('.search-select select');\n\nfunction fetchEventCards(searchText = '', countryCode = '') {\n  setSearch(searchText, countryCode);\n  clearEvents();\n\n  getEvents()\n    .then(events => {\n      if (!events.length) {\n        alert('Нічого не знайдено');\n        return;\n      }\n      drawEvents(events);\n    })\n    .catch(error => {\n      console.log('Помилка при отриманні events:', error);\n    });\n}\n\nfetchEventCards();\n\nheroSearchForm.addEventListener('submit', e => {\n  e.preventDefault();\n\n  const searchText = searchInput.value.trim();\n  const countryCode = countrySelect.value;\n\n  if (!searchText && !countryCode) {\n    alert('будь ласка, введіть пошук або оберіть країну');\n    return;\n  }\n\n  fetchEventCards(searchText, countryCode);\n});\n"],"names":["API_KEY","PER_PAGE","page","searchText","countryCode","setSearch","query","country","getEvents","today","params","_a","error","eventsList","clearEvents","getBestImage","images","a","b","drawEvents","data","markup","event","venue","_b","venueName","city","_c","_d","fullPlace","heroSearchForm","searchInput","countrySelect","fetchEventCards","events","e"],"mappings":"ssBAAA,MAAMA,EAAU,mCACVC,EAAW,GAEjB,IAAIC,EAAO,EACPC,EAAa,GACbC,EAAc,GAEX,SAASC,EAAUC,EAAOC,EAAS,CACxCJ,EAAaG,EACbF,EAAcG,EACdL,EAAO,CACT,CAMO,eAAeM,GAAY,OAChC,GAAI,CACF,MAAMC,EAAQ,IAAI,KAAM,EAAC,YAAW,EAE9BC,EAAS,IAAI,gBAAgB,CACjC,OAAQV,EACR,KAAME,EAAO,EACb,KAAMD,EACN,QAAS,YACT,MAAO,MACP,eAAgBQ,CACtB,CAAK,EAED,OAAIN,GAAYO,EAAO,OAAO,UAAWP,CAAU,EAC/CC,GAAaM,EAAO,OAAO,cAAeN,CAAW,IAOlDO,GADM,MAJI,MAAM,MACrB,yDAAyDD,CAAM,EACrE,GAEgC,QAChB,YAAL,YAAAC,EAAgB,SAAU,EAClC,OAAQC,EAAO,CACd,eAAQ,IAAIA,CAAK,EACV,EACR,CACH,CC3CA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAEjD,SAASC,GAAc,CAC5BD,EAAW,UAAY,EACzB,CAEA,SAASE,EAAaC,EAAS,GAAI,CACjC,OAAKA,EAAO,OAEGA,EAAO,KAAK,CAACC,EAAGC,IAAMA,EAAE,MAAQD,EAAE,KAAK,EAExC,CAAC,EAAE,IAJU,EAK7B,CAEO,SAASE,EAAWC,EAAO,GAAI,CACpC,MAAMC,EAASD,EACZ,IAAIE,GAAS,aACZ,MAAMC,GAAQC,GAAAb,EAAAW,EAAM,YAAN,YAAAX,EAAiB,SAAjB,YAAAa,EAA0B,GAElCC,GAAYF,GAAA,YAAAA,EAAO,OAAQ,gBAC3BG,IAAOC,EAAAJ,GAAA,YAAAA,EAAO,OAAP,YAAAI,EAAa,OAAQ,GAC5BpB,IAAUqB,EAAAL,GAAA,YAAAA,EAAO,UAAP,YAAAK,EAAgB,OAAQ,GAClCC,EAAY,CAACJ,EAAWC,EAAMnB,CAAO,EAAE,OAAO,OAAO,EAAE,KAAK,IAAI,EAItE,MAAO;AAAA;AAAA,oBAFUQ,EAAaO,EAAM,MAAM,CAIpB,UAAUA,EAAM,IAAI;AAAA,cAClCA,EAAM,IAAI;AAAA,aACXA,EAAM,MAAM,MAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,YAK5BO,CAAS;AAAA;AAAA,YAGrB,CAAK,EACA,KAAK,EAAE,EAEVhB,EAAW,mBAAmB,YAAaQ,CAAM,CACnD,CCvCA,MAAMS,EAAiB,SAAS,cAAc,cAAc,EACtDC,EAAc,SAAS,cAAc,qBAAqB,EAC1DC,EAAgB,SAAS,cAAc,uBAAuB,EAEpE,SAASC,EAAgB9B,EAAa,GAAIC,EAAc,GAAI,CAC1DC,EAAUF,EAAYC,CAAW,EACjCU,IAEAN,EAAW,EACR,KAAK0B,GAAU,CACd,GAAI,CAACA,EAAO,OAAQ,CAClB,MAAM,oBAAoB,EAC1B,MACD,CACDf,EAAWe,CAAM,CACvB,CAAK,EACA,MAAMtB,GAAS,CACd,QAAQ,IAAI,gCAAiCA,CAAK,CACxD,CAAK,CACL,CAEAqB,IAEAH,EAAe,iBAAiB,SAAUK,GAAK,CAC7CA,EAAE,eAAc,EAEhB,MAAMhC,EAAa4B,EAAY,MAAM,KAAI,EACnC3B,EAAc4B,EAAc,MAElC,GAAI,CAAC7B,GAAc,CAACC,EAAa,CAC/B,MAAM,8CAA8C,EACpD,MACD,CAED6B,EAAgB9B,EAAYC,CAAW,CACzC,CAAC"}