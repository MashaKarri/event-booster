{"version":3,"file":"commonHelpers.js","sources":["../src/js/main-section-api.js","../src/js/main-section-layout.js","../src/js/header.js"],"sourcesContent":["const API_KEY = 'sDWkN6pm2AwhXYN4z6b2LV2Cv7281iLQ';\nconst PER_PAGE = 20;\n\nlet page = 1;\nlet searchText = '';\nlet countryCode = '';\n\nexport function setSearch(query, country) {\n  searchText = query;\n  countryCode = country;\n  page = 1;\n}\n\nexport function incrementPage() {\n  page += 1;\n}\n\nexport async function getEvents() {\n  try {\n    const today = new Date().toISOString();\n\n    const response = await fetch(\n      `https://app.ticketmaster.com/discovery/v2/events.json?` +\n        `keyword=${searchText}` +\n        `&countryCode=${countryCode}` +\n        `&page=${page - 1}` +\n        `&size=${PER_PAGE}` +\n        `&apikey=${API_KEY}` +\n        `&sort_by=eventdate` +\n        `&order=asc` +\n        `&eventdate_from=${today}`\n    );\n\n    const data = await response.json();\n\n    return data._embedded?.events || [];\n  } catch (error) {\n    console.log(error);\n    return [];\n  }\n}\n","const eventsList = document.querySelector('.events-list');\n\nexport function clearEvents() {\n  eventsList.innerHTML = '';\n}\n\nexport function drawEvents(data = []) {\n  const markup = data\n    .map(event => {\n      const venue = event._embedded?.venues?.[0];\n\n      const venueName = venue?.name || 'Unknown venue';\n      const city = venue?.city?.name || '';\n      const country = venue?.country?.name || '';\n      const fullPlace = [venueName, city, country].filter(Boolean).join(', ');\n\n      return `\n      <li class=\"list-item\">\n        <img src=\"${event.images[0].url}\" alt=\"${event.name}\">\n        <h3>${event.name}</h3>\n        <p>${event.dates.start.localDate}</p>\n        <p>\n          <svg class=\"icon-location\">\n            <use href=\"./img/symbol-defs.svg#location\"></use>\n          </svg>\n          ${fullPlace}\n          </p>\n      </li>`;\n    })\n    .join('');\n\n  eventsList.insertAdjacentHTML('beforeend', markup);\n}\n","import { setSearch, getEvents } from './main-section-api';\nimport { drawEvents, clearEvents } from './main-section-layout';\n\nconst heroSearchForm = document.querySelector('.hero-search');\nconst searchInput = document.querySelector('.search-input input');\nconst countrySelect = document.querySelector('.search-select select');\n\nfunction fetchEventCards(searchText, countryCode) {\n  setSearch(searchText, countryCode);\n  clearEvents();\n\n  getEvents()\n    .then(events => {\n      if (!events.length) {\n        alert('Нічого не знайдено');\n        return;\n      }\n      drawEvents(events);\n    })\n    .catch(error => {\n      console.log('Помилка при отриманні events:', error);\n    });\n}\n\nheroSearchForm.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  const searchText = searchInput.value.trim();\n  const countryCode = countrySelect.value;\n\n  if (!searchText && !countryCode) {\n    alert('будь ласка, введіть пошук або оберіть країну');\n    return;\n  }\n\n  fetchEventCards(searchText, countryCode);\n});\n"],"names":["API_KEY","PER_PAGE","page","searchText","countryCode","setSearch","query","country","getEvents","today","_a","error","eventsList","clearEvents","drawEvents","data","markup","event","venue","_b","venueName","city","_c","_d","fullPlace","heroSearchForm","searchInput","countrySelect","fetchEventCards","events","e"],"mappings":"ssBAAA,MAAMA,EAAU,mCACVC,EAAW,GAEjB,IAAIC,EAAO,EACPC,EAAa,GACbC,EAAc,GAEX,SAASC,EAAUC,EAAOC,EAAS,CACxCJ,EAAaG,EACbF,EAAcG,EACdL,EAAO,CACT,CAMO,eAAeM,GAAY,OAChC,GAAI,CACF,MAAMC,EAAQ,IAAI,KAAM,EAAC,YAAW,EAgBpC,QAAOC,GAFM,MAZI,MAAM,MACrB,iEACaP,CAAU,gBACLC,CAAW,SAClBF,EAAO,CAAC,SACRD,CAAQ,WACND,CAAO,+CAGCS,CAAK,EAChC,GAEgC,QAEhB,YAAL,YAAAC,EAAgB,SAAU,EAClC,OAAQC,EAAO,CACd,eAAQ,IAAIA,CAAK,EACV,EACR,CACH,CCxCA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAEjD,SAASC,GAAc,CAC5BD,EAAW,UAAY,EACzB,CAEO,SAASE,EAAWC,EAAO,GAAI,CACpC,MAAMC,EAASD,EACZ,IAAIE,GAAS,aACZ,MAAMC,GAAQC,GAAAT,EAAAO,EAAM,YAAN,YAAAP,EAAiB,SAAjB,YAAAS,EAA0B,GAElCC,GAAYF,GAAA,YAAAA,EAAO,OAAQ,gBAC3BG,IAAOC,EAAAJ,GAAA,YAAAA,EAAO,OAAP,YAAAI,EAAa,OAAQ,GAC5Bf,IAAUgB,EAAAL,GAAA,YAAAA,EAAO,UAAP,YAAAK,EAAgB,OAAQ,GAClCC,EAAY,CAACJ,EAAWC,EAAMd,CAAO,EAAE,OAAO,OAAO,EAAE,KAAK,IAAI,EAEtE,MAAO;AAAA;AAAA,oBAEOU,EAAM,OAAO,CAAC,EAAE,GAAG,UAAUA,EAAM,IAAI;AAAA,cAC7CA,EAAM,IAAI;AAAA,aACXA,EAAM,MAAM,MAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,YAK5BO,CAAS;AAAA;AAAA,YAGrB,CAAK,EACA,KAAK,EAAE,EAEVZ,EAAW,mBAAmB,YAAaI,CAAM,CACnD,CC7BA,MAAMS,EAAiB,SAAS,cAAc,cAAc,EACtDC,EAAc,SAAS,cAAc,qBAAqB,EAC1DC,EAAgB,SAAS,cAAc,uBAAuB,EAEpE,SAASC,EAAgBzB,EAAYC,EAAa,CAChDC,EAAUF,EAAYC,CAAW,EACjCS,IAEAL,EAAW,EACR,KAAKqB,GAAU,CACd,GAAI,CAACA,EAAO,OAAQ,CAClB,MAAM,oBAAoB,EAC1B,MACD,CACDf,EAAWe,CAAM,CACvB,CAAK,EACA,MAAMlB,GAAS,CACd,QAAQ,IAAI,gCAAiCA,CAAK,CACxD,CAAK,CACL,CAEAc,EAAe,iBAAiB,SAAU,MAAMK,GAAK,CACnDA,EAAE,eAAc,EAEhB,MAAM3B,EAAauB,EAAY,MAAM,KAAI,EACnCtB,EAAcuB,EAAc,MAElC,GAAI,CAACxB,GAAc,CAACC,EAAa,CAC/B,MAAM,8CAA8C,EACpD,MACD,CAEDwB,EAAgBzB,EAAYC,CAAW,CACzC,CAAC"}