{"version":3,"file":"commonHelpers.js","sources":["../src/js/main-section-api.js","../src/img/symbol-defs.svg","../src/js/main-section-layout.js","../src/img/main-section/no-results.svg","../src/js/header.js","../src/js/main-modal-api.js","../src/js/main-modal-layout.js","../src/js/main-modal.js"],"sourcesContent":["const API_KEY = 'sDWkN6pm2AwhXYN4z6b2LV2Cv7281iLQ';\nconst PER_PAGE = 20;\n\nlet page = 1;\nlet searchText = '';\nlet countryCode = '';\n\nexport function setSearch(query, country) {\n  searchText = query;\n  countryCode = country;\n  page = 1;\n}\n\nexport function incrementPage() {\n  page += 1;\n}\n\nexport async function getEvents() {\n  try {\n    const today = new Date().toISOString();\n\n    const params = new URLSearchParams({\n      apikey: API_KEY,\n      page: page - 1,\n      size: PER_PAGE,\n      sort_by: 'eventdate',\n      order: 'asc',\n      eventdate_from: today,\n    });\n\n    if (searchText) params.append('keyword', searchText);\n    if (countryCode) params.append('countryCode', countryCode);\n\n    const response = await fetch(\n      `https://app.ticketmaster.com/discovery/v2/events.json?${params}`\n    );\n\n    const data = await response.json();\n    return data._embedded?.events || [];\n  } catch (error) {\n    console.log(error);\n    return [];\n  }\n}\n","export default \"__VITE_ASSET__d90e9707__\"","import spritePath from '../img/symbol-defs.svg';\n\nconst eventsList = document.querySelector('.events-list');\n\nexport function clearEvents() {\n  eventsList.innerHTML = '';\n}\n\nexport function getBestImage(images = []) {\n  if (!images.length) return '';\n\n  const sorted = images.sort((a, b) => b.width - a.width);\n\n  return sorted[0].url;\n}\n\nexport function drawEvents(data = []) {\n  const markup = data\n    .map(event => {\n      const venue = event._embedded?.venues?.[0];\n\n      const venueName = venue?.name || 'Unknown venue';\n      const city = venue?.city?.name || '';\n      const country = venue?.country?.name || '';\n      const fullPlace = [venueName, city, country].filter(Boolean).join(', ');\n\n      const imageUrl = getBestImage(event.images);\n\n      return `\n      <li class=\"list-item\" data-id=\"${event.id}\">\n        <img src=\"${imageUrl}\" alt=\"${event.name}\" loading=\"lazy\">\n        <h3>${event.name}</h3>\n        <p>${event.dates.start.localDate}</p>\n        <p>\n          <svg class=\"icon-location\">\n            <use href=\"${spritePath}#location\"></use>\n          </svg>\n          ${fullPlace}\n        </p>\n      </li>`;\n    })\n    .join('');\n\n  eventsList.insertAdjacentHTML('beforeend', markup);\n}\n","export default \"__VITE_ASSET__a0f520ce__\"","import { setSearch, getEvents } from './main-section-api';\nimport { drawEvents, clearEvents } from './main-section-layout';\nimport noResultsImg from '../img/main-section/no-results.svg';\n\nconst heroSearchForm = document.querySelector('.hero-search');\nconst searchInput = document.querySelector('.search-input input');\nconst countrySelect = document.querySelector('.search-select select');\nconst eventsList = document.querySelector('.events-list');\n\nfunction fetchEventCards(searchText = '', countryCode = '') {\n  setSearch(searchText, countryCode);\n  clearEvents();\n\n  getEvents()\n    .then(events => {\n      if (!events.length) {\n        const noResultsDiv = document.createElement('div');\n        noResultsDiv.classList.add('no-results');\n        noResultsDiv.innerHTML = `\n          <img src=\"${noResultsImg}\" alt=\"No results found\" />\n          <p>Нічого не знайдено</p>\n        `;\n        eventsList.appendChild(noResultsDiv);\n        return;\n      }\n      drawEvents(events);\n    })\n    .catch(error => {\n      console.log('Помилка при отриманні events:', error);\n    });\n}\n\nfetchEventCards();\n\nheroSearchForm.addEventListener('submit', e => {\n  e.preventDefault();\n\n  const searchText = searchInput.value.trim();\n  const countryCode = countrySelect.value;\n\n  if (!searchText && !countryCode) return;\n\n  fetchEventCards(searchText, countryCode);\n});\n\ncountrySelect.addEventListener('change', () => {\n  const searchText = searchInput.value.trim();\n  const countryCode = countrySelect.value;\n\n  if (!searchText && !countryCode) return;\n\n  fetchEventCards(searchText, countryCode);\n});\n","const API_KEY = 'sDWkN6pm2AwhXYN4z6b2LV2Cv7281iLQ';\n\nexport async function getEventById(eventId) {\n  try {\n    const response = await fetch(\n      `https://app.ticketmaster.com/discovery/v2/events/${eventId}.json?apikey=${API_KEY}`\n    );\n\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.log('Помилка завантаження event:', error);\n    return null;\n  }\n}\n","import { getBestImage } from './main-section-layout';\nimport spritePath from '../img/symbol-defs.svg';\n\nconst modal = document.querySelector('#eventModal');\nconst modalBody = document.querySelector('#modalBody');\nconst closeBtn = document.querySelector('.modal-close');\n\nexport function openModal() {\n  modal.classList.remove('is-hidden');\n  document.body.style.overflow = 'hidden';\n}\n\nexport function closeModal() {\n  modal.classList.add('is-hidden');\n  document.body.style.overflow = '';\n}\n\ncloseBtn.addEventListener('click', closeModal);\n\nmodal.addEventListener('click', e => {\n  if (e.target === modal) closeModal();\n});\n\nfunction createPriceItem(type, min, max, currency = 'UAH', url = '#') {\n  return `\n    <div class=\"modal-price-item\">\n      <div class=\"price-with-icon\">\n        <svg class=\"price-icon\" width=\"29\" height=\"20\">\n          <use href=\"${spritePath}#barcode\"></use>\n        </svg>\n        <p>${type.toUpperCase()} ${min}-${max} ${currency}</p>\n      </div>\n      <button class=\"buy-btn\" onclick=\"window.open('${url}', '_blank')\">BUY TICKETS</button>\n    </div>\n  `;\n}\n\nfunction getRandomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nexport function renderModal(event) {\n  const venue = event._embedded?.venues?.[0];\n  const attraction = event._embedded?.attractions?.[0];\n\n  const imageUrl = getBestImage(event.images);\n  const info = event.info || event.pleaseNote || 'No available description';\n\n  const date = event.dates?.start?.localDate || 'Unknown date';\n  let time = event.dates?.start?.localTime || '';\n  if (time) {\n    const [hour, minute] = time.split(':');\n    time = `${hour}:${minute} (Kyiv/Ukraine)`;\n  }\n\n  const country = venue?.country?.name || '';\n  const city = venue?.city?.name || '';\n  const venueName = venue?.name || 'Unknown place';\n  const who = attraction?.name || event.name;\n  const authorUrl = event.url || '#';\n\n  const prices = event.priceRanges || [];\n\n  const pricesMarkup = prices.length\n    ? prices\n        .map(price =>\n          createPriceItem(\n            price.type,\n            price.min,\n            price.max,\n            price.currency,\n            authorUrl\n          )\n        )\n        .join('')\n    : [\n        createPriceItem(\n          'Standart',\n          getRandomInt(200, 400),\n          getRandomInt(450, 700),\n          'UAH',\n          authorUrl\n        ),\n        createPriceItem(\n          'VIP',\n          getRandomInt(900, 1100),\n          getRandomInt(1200, 1700),\n          'UAH',\n          authorUrl\n        ),\n      ].join('');\n\n  modalBody.innerHTML = `\n    <div class=\"modal-inner\">\n      <div class=\"modal-avatar\">\n        <img src=\"${imageUrl}\" alt=\"${event.name}\">\n      </div>\n\n      <div class=\"modal-event-full\">\n        <div class=\"modal-left\">\n          <img src=\"${imageUrl}\" alt=\"${event.name}\">\n        </div>\n\n        <div class=\"modal-right\">\n          <h3 class=\"criterion\">INFO</h3>\n          <p>${info}</p>\n\n          <h3 class=\"criterion\">WHEN</h3>\n          <p>${date}<br>${time}</p>\n\n          <h3 class=\"criterion\">WHERE</h3>\n          <p>${city}, ${country}<br>${venueName}</p>\n\n          <h3 class=\"criterion\">WHO</h3>\n          <p>${who}</p>\n\n          <h3 class=\"criterion\">PRICES</h3>\n          ${pricesMarkup}\n        </div>\n\n        <button class=\"more-btn\" onclick=\"window.open('${authorUrl}', '_blank')\">\n          MORE FROM THIS AUTHOR\n        </button>\n      </div>\n    </div>\n  `;\n}\n\nexport function renderLoader() {\n  modalBody.innerHTML = '<p>Loading...</p>';\n}\n\nexport function renderError() {\n  modalBody.innerHTML = '<p>Error loading event</p>';\n}\n","import { getEventById } from './main-modal-api';\nimport {\n  openModal,\n  renderModal,\n  renderLoader,\n  renderError,\n} from './main-modal-layout';\n\nconst eventsList = document.querySelector('.events-list');\n\neventsList.addEventListener('click', async e => {\n  const card = e.target.closest('.list-item');\n  if (!card) return;\n\n  const eventId = card.dataset.id;\n  if (!eventId) return;\n\n  renderLoader();\n  openModal();\n\n  const eventData = await getEventById(eventId);\n\n  if (!eventData) {\n    renderError();\n    return;\n  }\n\n  renderModal(eventData);\n});\n"],"names":["API_KEY","PER_PAGE","page","searchText","countryCode","setSearch","query","country","getEvents","today","params","_a","error","spritePath","eventsList","clearEvents","getBestImage","images","a","b","drawEvents","data","markup","event","venue","_b","venueName","city","_c","_d","fullPlace","imageUrl","noResultsImg","heroSearchForm","searchInput","countrySelect","fetchEventCards","events","noResultsDiv","getEventById","eventId","modal","modalBody","closeBtn","openModal","closeModal","createPriceItem","type","min","max","currency","url","getRandomInt","renderModal","attraction","info","date","_f","_e","time","_h","_g","hour","minute","_i","_j","who","authorUrl","prices","pricesMarkup","price","renderLoader","renderError","card","eventData"],"mappings":"ssBAAA,MAAMA,EAAU,mCACVC,EAAW,GAEjB,IAAIC,EAAO,EACPC,EAAa,GACbC,EAAc,GAEX,SAASC,EAAUC,EAAOC,EAAS,CACxCJ,EAAaG,EACbF,EAAcG,EACdL,EAAO,CACT,CAMO,eAAeM,GAAY,OAChC,GAAI,CACF,MAAMC,EAAQ,IAAI,KAAM,EAAC,YAAW,EAE9BC,EAAS,IAAI,gBAAgB,CACjC,OAAQV,EACR,KAAME,EAAO,EACb,KAAMD,EACN,QAAS,YACT,MAAO,MACP,eAAgBQ,CACtB,CAAK,EAED,OAAIN,GAAYO,EAAO,OAAO,UAAWP,CAAU,EAC/CC,GAAaM,EAAO,OAAO,cAAeN,CAAW,IAOlDO,GADM,MAJI,MAAM,MACrB,yDAAyDD,CAAM,EACrE,GAEgC,QAChB,YAAL,YAAAC,EAAgB,SAAU,EAClC,OAAQC,EAAO,CACd,eAAQ,IAAIA,CAAK,EACV,EACR,CACH,CC3CA,MAAeC,EAAA,iDCETC,EAAa,SAAS,cAAc,cAAc,EAEjD,SAASC,GAAc,CAC5BD,EAAW,UAAY,EACzB,CAEO,SAASE,EAAaC,EAAS,GAAI,CACxC,OAAKA,EAAO,OAEGA,EAAO,KAAK,CAACC,EAAGC,IAAMA,EAAE,MAAQD,EAAE,KAAK,EAExC,CAAC,EAAE,IAJU,EAK7B,CAEO,SAASE,EAAWC,EAAO,GAAI,CACpC,MAAMC,EAASD,EACZ,IAAIE,GAAS,aACZ,MAAMC,GAAQC,GAAAd,EAAAY,EAAM,YAAN,YAAAZ,EAAiB,SAAjB,YAAAc,EAA0B,GAElCC,GAAYF,GAAA,YAAAA,EAAO,OAAQ,gBAC3BG,IAAOC,EAAAJ,GAAA,YAAAA,EAAO,OAAP,YAAAI,EAAa,OAAQ,GAC5BrB,IAAUsB,EAAAL,GAAA,YAAAA,EAAO,UAAP,YAAAK,EAAgB,OAAQ,GAClCC,EAAY,CAACJ,EAAWC,EAAMpB,CAAO,EAAE,OAAO,OAAO,EAAE,KAAK,IAAI,EAEhEwB,EAAWf,EAAaO,EAAM,MAAM,EAE1C,MAAO;AAAA,uCAC0BA,EAAM,EAAE;AAAA,oBAC3BQ,CAAQ,UAAUR,EAAM,IAAI;AAAA,cAClCA,EAAM,IAAI;AAAA,aACXA,EAAM,MAAM,MAAM,SAAS;AAAA;AAAA;AAAA,yBAGfV,CAAU;AAAA;AAAA,YAEvBiB,CAAS;AAAA;AAAA,YAGrB,CAAK,EACA,KAAK,EAAE,EAEVhB,EAAW,mBAAmB,YAAaQ,CAAM,CACnD,CC5CA,MAAeU,EAAA,gDCITC,EAAiB,SAAS,cAAc,cAAc,EACtDC,EAAc,SAAS,cAAc,qBAAqB,EAC1DC,EAAgB,SAAS,cAAc,uBAAuB,EAC9DrB,EAAa,SAAS,cAAc,cAAc,EAExD,SAASsB,EAAgBjC,EAAa,GAAIC,EAAc,GAAI,CAC1DC,EAAUF,EAAYC,CAAW,EACjCW,IAEAP,EAAW,EACR,KAAK6B,GAAU,CACd,GAAI,CAACA,EAAO,OAAQ,CAClB,MAAMC,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAU,IAAI,YAAY,EACvCA,EAAa,UAAY;AAAA,sBACXN,CAAY;AAAA;AAAA,UAG1BlB,EAAW,YAAYwB,CAAY,EACnC,MACD,CACDlB,EAAWiB,CAAM,CACvB,CAAK,EACA,MAAMzB,GAAS,CACd,QAAQ,IAAI,gCAAiCA,CAAK,CACxD,CAAK,CACL,CAEAwB,IAEAH,EAAe,iBAAiB,SAAU,GAAK,CAC7C,EAAE,eAAc,EAEhB,MAAM9B,EAAa+B,EAAY,MAAM,KAAI,EACnC9B,EAAc+B,EAAc,MAE9B,CAAChC,GAAc,CAACC,GAEpBgC,EAAgBjC,EAAYC,CAAW,CACzC,CAAC,EAED+B,EAAc,iBAAiB,SAAU,IAAM,CAC7C,MAAMhC,EAAa+B,EAAY,MAAM,KAAI,EACnC9B,EAAc+B,EAAc,MAE9B,CAAChC,GAAc,CAACC,GAEpBgC,EAAgBjC,EAAYC,CAAW,CACzC,CAAC,ECpDD,MAAMJ,EAAU,mCAET,eAAeuC,EAAaC,EAAS,CAC1C,GAAI,CAMF,OADa,MAJI,MAAM,MACrB,oDAAoDA,CAAO,gBAAgBxC,CAAO,EACxF,GAEgC,MAE7B,OAAQY,EAAO,CACd,eAAQ,IAAI,8BAA+BA,CAAK,EACzC,IACR,CACH,CCXA,MAAM6B,EAAQ,SAAS,cAAc,aAAa,EAC5CC,EAAY,SAAS,cAAc,YAAY,EAC/CC,EAAW,SAAS,cAAc,cAAc,EAE/C,SAASC,GAAY,CAC1BH,EAAM,UAAU,OAAO,WAAW,EAClC,SAAS,KAAK,MAAM,SAAW,QACjC,CAEO,SAASI,GAAa,CAC3BJ,EAAM,UAAU,IAAI,WAAW,EAC/B,SAAS,KAAK,MAAM,SAAW,EACjC,CAEAE,EAAS,iBAAiB,QAASE,CAAU,EAE7CJ,EAAM,iBAAiB,QAAS,GAAK,CAC/B,EAAE,SAAWA,GAAOI,EAAU,CACpC,CAAC,EAED,SAASC,EAAgBC,EAAMC,EAAKC,EAAKC,EAAW,MAAOC,EAAM,IAAK,CACpE,MAAO;AAAA;AAAA;AAAA;AAAA,uBAIctC,CAAU;AAAA;AAAA,aAEpBkC,EAAK,YAAW,CAAE,IAAIC,CAAG,IAAIC,CAAG,IAAIC,CAAQ;AAAA;AAAA,sDAEHC,CAAG;AAAA;AAAA,GAGzD,CAEA,SAASC,EAAaJ,EAAKC,EAAK,CAC9B,OAAO,KAAK,MAAM,KAAK,OAAM,GAAMA,EAAMD,EAAM,EAAE,EAAIA,CACvD,CAEO,SAASK,EAAY9B,EAAO,yBACjC,MAAMC,GAAQC,GAAAd,EAAAY,EAAM,YAAN,YAAAZ,EAAiB,SAAjB,YAAAc,EAA0B,GAClC6B,GAAazB,GAAAD,EAAAL,EAAM,YAAN,YAAAK,EAAiB,cAAjB,YAAAC,EAA+B,GAE5CE,EAAWf,EAAaO,EAAM,MAAM,EACpCgC,EAAOhC,EAAM,MAAQA,EAAM,YAAc,2BAEzCiC,IAAOC,GAAAC,EAAAnC,EAAM,QAAN,YAAAmC,EAAa,QAAb,YAAAD,EAAoB,YAAa,eAC9C,IAAIE,IAAOC,GAAAC,EAAAtC,EAAM,QAAN,YAAAsC,EAAa,QAAb,YAAAD,EAAoB,YAAa,GAC5C,GAAID,EAAM,CACR,KAAM,CAACG,EAAMC,CAAM,EAAIJ,EAAK,MAAM,GAAG,EACrCA,EAAO,GAAGG,CAAI,IAAIC,CAAM,iBACzB,CAED,MAAMxD,IAAUyD,EAAAxC,GAAA,YAAAA,EAAO,UAAP,YAAAwC,EAAgB,OAAQ,GAClCrC,IAAOsC,EAAAzC,GAAA,YAAAA,EAAO,OAAP,YAAAyC,EAAa,OAAQ,GAC5BvC,GAAYF,GAAA,YAAAA,EAAO,OAAQ,gBAC3B0C,GAAMZ,GAAA,YAAAA,EAAY,OAAQ/B,EAAM,KAChC4C,EAAY5C,EAAM,KAAO,IAEzB6C,EAAS7C,EAAM,aAAe,GAE9B8C,EAAeD,EAAO,OACxBA,EACG,IAAIE,GACHxB,EACEwB,EAAM,KACNA,EAAM,IACNA,EAAM,IACNA,EAAM,SACNH,CACD,CACF,EACA,KAAK,EAAE,EACV,CACErB,EACE,WACAM,EAAa,IAAK,GAAG,EACrBA,EAAa,IAAK,GAAG,EACrB,MACAe,CACD,EACDrB,EACE,MACAM,EAAa,IAAK,IAAI,EACtBA,EAAa,KAAM,IAAI,EACvB,MACAe,CACD,CACT,EAAQ,KAAK,EAAE,EAEbzB,EAAU,UAAY;AAAA;AAAA;AAAA,oBAGJX,CAAQ,UAAUR,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,sBAK1BQ,CAAQ,UAAUR,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,eAKnCgC,CAAI;AAAA;AAAA;AAAA,eAGJC,CAAI,OAAOG,CAAI;AAAA;AAAA;AAAA,eAGfhC,CAAI,KAAKpB,CAAO,OAAOmB,CAAS;AAAA;AAAA;AAAA,eAGhCwC,CAAG;AAAA;AAAA;AAAA,YAGNG,CAAY;AAAA;AAAA;AAAA,yDAGiCF,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,GAMlE,CAEO,SAASI,IAAe,CAC7B7B,EAAU,UAAY,mBACxB,CAEO,SAAS8B,IAAc,CAC5B9B,EAAU,UAAY,4BACxB,CC9HA,MAAM5B,GAAa,SAAS,cAAc,cAAc,EAExDA,GAAW,iBAAiB,QAAS,MAAM,GAAK,CAC9C,MAAM2D,EAAO,EAAE,OAAO,QAAQ,YAAY,EAC1C,GAAI,CAACA,EAAM,OAEX,MAAMjC,EAAUiC,EAAK,QAAQ,GAC7B,GAAI,CAACjC,EAAS,OAEd+B,KACA3B,IAEA,MAAM8B,EAAY,MAAMnC,EAAaC,CAAO,EAE5C,GAAI,CAACkC,EAAW,CACdF,KACA,MACD,CAEDnB,EAAYqB,CAAS,CACvB,CAAC"}